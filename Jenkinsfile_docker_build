pipeline {
    agent any
    parameters {
        string(name: 'environment', defaultValue: 'stg', description: 'Building environment')
    }
    stages { 
        stage('build') {
            steps {
                echo "Building ${params.environment} environment..."
                try {
                    sh "docker build . -f Dockerfile"
                }
                catch (exc) {
                    echo "Something went wrong"
                    throw
                }
            }
        }
    }
}